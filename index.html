<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors</title>
    </head>
    <body>

    </body>
    <script>
        function computerPlay(){
            let arr = ['Rock', 'Paper', 'Scissors'];
            let ind = Math.floor(Math.random()*3);
            return arr[ind];
        }

        function message(msg, winSelection, loseSelection){
            return `You ${msg}! ${winSelection} beats ${loseSelection}`
        }

        function processInput(msg){
            return msg.charAt(0).toUpperCase() + msg.toLowerCase().slice(1);
        }

        function playRound(playerSelection, computerSelection) {
            playerSelection = processInput(playerSelection);
            computerSelection = computerSelection.charAt(0).toUpperCase() + computerSelection.toLowerCase().slice(1);
            
            if (playerSelection === "Rock"){
                if (computerSelection === "Paper"){
                    return message('lose', computerSelection, playerSelection);
                } else if (computerSelection === "Scissors"){
                    return message('win', playerSelection, computerSelection);
                } else {
                    return 'Draw'
                }
                
            } else if (playerSelection === "Paper"){
                if (computerSelection === "Rock"){
                    return message('win', playerSelection, computerSelection);
                } else if (computerSelection === "Scissors"){
                    return message('lose', computerSelection, playerSelection);
                } else {
                    return 'Draw'
                }
            } else if (playerSelection === "Scissors"){
                if (computerSelection === "Rock"){
                    return message('lose', computerSelection, playerSelection);
                } else if (computerSelection === "Paper"){
                    return message('win', playerSelection, computerSelection);
                } else {
                    return 'Draw'
                }
            }
            
        }

        function game(gamesToPlay = 5){
            let playerWin = 0;
            let compWin = 0;

            let gameRes;

            for (let i = 0; i < gamesToPlay; i++){
                const playerSelection = prompt("Chose Rock, Paper or Scissors");
                const computerSelection = computerPlay();

                gameRes = playRound(playerSelection, computerSelection);
                console.log(playerSelection, computerSelection);
                console.log(gameRes);
                console.log();
                
                if (gameRes.startsWith('You win')){
                    playerWin++;
                } else if (gameRes.startsWith('You lose')){
                    compWin++;
                }
            }

            if (playerWin > compWin){
                return `You win the game. Your score ${playerWin}. Computer's score ${compWin}.`
            } else if (compWin > playerWin){
                return `You lose the game. Your score ${playerWin}. Computer's score ${compWin}.`
            } 
            
            return `Draw.`
        }

        console.log(game());
    </script>
</html>